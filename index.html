<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Monaco Elegant Code Editor</title>
  <style>
    :root{
      --bg:#f5f7fa;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --brand:#2563eb;
      --border:#e5e7eb;
      --shadow:0 6px 24px rgba(0,0,0,0.08);
      --radius:14px;
    }
    [data-theme="dark"]{
      --bg:#0f172a;
      --card:#111827;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --brand:#60a5fa;
      --border:#1f2937;
      --shadow:0 8px 28px rgba(0,0,0,0.4);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:var(--bg);
      color:var(--text);
      display:flex;
      min-height:100vh;
      flex-direction:column;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:16px 20px;
      backdrop-filter:saturate(160%) blur(8px);
      border-bottom:1px solid var(--border);
      position:sticky; top:0; z-index:10;
      background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.2));
    }
    [data-theme="dark"] header{
      background:linear-gradient(180deg, rgba(17,24,39,0.7), rgba(17,24,39,0.3));
    }
    .brand{
      display:flex;align-items:center;gap:12px;
      font-weight:600; color:var(--text);
    }
    .dot{
      width:14px;height:14px;border-radius:50%;
      background:var(--brand); box-shadow:0 0 0 6px rgba(37,99,235,0.15);
    }
    .controls{
      display:flex;gap:12px;align-items:center;flex-wrap:wrap;
    }
    select, button{
      appearance:none;
      border:1px solid var(--border);
      background:var(--card);
      color:var(--text);
      padding:10px 12px;
      border-radius:10px;
      font-size:14px;
      transition:transform .08s ease, box-shadow .2s ease, border-color .2s ease;
    }
    select:focus, button:focus{outline:none;border-color:var(--brand)}
    button:hover, select:hover{box-shadow:var(--shadow)}
    button:active{transform:scale(0.98)}
    .btn-primary{
      background:var(--brand);
      color:#fff; border-color:transparent;
    }
    main{
      display:grid;
      grid-template-columns: 1fr 480px;
      gap:18px;
      padding:18px;
      flex:1;
    }
    @media (max-width: 1000px){
      main{grid-template-columns: 1fr}
      .panel.preview{height:40vh}
    }
    .panel{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      display:flex;flex-direction:column;
      min-height:0;
    }
    .panel .title{
      padding:12px 14px;
      font-weight:600;
      border-bottom:1px solid var(--border);
    }
    .editor-container{flex:1;min-height:0}
    #editor{width:100%;height:100%}
    .preview{
      display:flex;flex-direction:column;
    }
    .preview .hint{
      padding:10px 14px;color:var(--muted);
      border-bottom:1px solid var(--border);
      font-size:13px;
    }
    #preview{
      flex:1; border:0; background:#fff;
    }
    [data-theme="dark"] #preview{background:#0b0b0b}
    footer{
      padding:10px 18px;
      color:var(--muted);
      border-top:1px solid var(--border);
      font-size:12px;
    }
  </style>
</head>
<body data-theme="light">
  <header>
    <div class="brand">
      <span class="dot"></span>
      <span>Elegant Code Editor</span>
    </div>
    <div class="controls">
      <select id="language">
        <option value="html">HTML</option>
        <option value="css">CSS</option>
        <option value="javascript">JavaScript</option>
        <option value="typescript">TypeScript</option>
        <option value="json">JSON</option>
        <option value="markdown">Markdown</option>
        <option value="xml">XML</option>
        <option value="yaml">YAML</option>
        <option value="java">Java</option>
        <option value="csharp">C#</option>
        <option value="python">Python</option>
        <option value="cpp">C/C++</option>
        <option value="php">PHP</option>
        <option value="rust">Rust</option>
        <option value="go">Go</option>
        <option value="sql">SQL</option>
        <option value="shell">Shell</option>
      </select>
      <select id="theme">
        <option value="vs">Light</option>
        <option value="vs-dark">Dark</option>
        <option value="hc-black">High Contrast</option>
      </select>
      <button id="run" class="btn-primary">ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
      <button id="toggleTheme">ØªØ¨Ø¯ÙŠÙ„ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
      <button id="download">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</button>
    </div>
  </header>

  <main>
    <section class="panel">
      <div class="title">Ø§Ù„Ù…Ø­Ø±Ø±</div>
      <div class="editor-container">
        <div id="editor"></div>
      </div>
    </section>

    <section class="panel preview">
      <div class="title">Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</div>
      <div class="hint">ØªØ¹Ù…Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¹Ù†Ø¯ Ù„ØºØ§Øª Ø§Ù„ÙˆÙŠØ¨ (HTML/CSS/JS). Ù„Ù„ØºØ§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ ÙŠØªÙ… ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø£Ùˆ Ø§Ù„Ù†Ø³Ø®.</div>
      <iframe id="preview" title="preview"></iframe>
    </section>
  </main>

  <footer>
    ÙˆØ§Ø¬Ù‡Ø© Ø£Ù†ÙŠÙ‚Ø© Ù…Ø³ØªÙˆØ­Ø§Ø© Ù…Ù† Ø£Ø³Ù„ÙˆØ¨ Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª. Ù…Ø­Ø±Ù‘Ùƒ Ø§Ù„ØªØ­Ø±ÙŠØ± Monaco (Ù†ÙØ³ Ù…Ø­Ø±Ø± VS Code).
  </footer>

  <!-- ØªØ­Ù…ÙŠÙ„ Monaco Editor (Ù†Ù…Ø· AMD) -->
  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.51.0/min/vs/loader.js"></script>
  <script>
    const samples = {
      html: "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset='UTF-8'>\n  <title>Preview</title>\n  <style>\n    body{font-family:Segoe UI;display:flex;min-height:100vh;align-items:center;justify-content:center;background:#f5f7fa}\n    h1{color:#2563eb}\n  </style>\n</head>\n<body>\n  <h1>Ù…Ø±Ø­Ø¨Ø§ ÙŠØ§ ÙŠØ§Ø³Ø± ğŸ‘‹</h1>\n  <p>Ù‡Ø°Ø§ Ù…Ø«Ø§Ù„ HTML Ø£Ù†ÙŠÙ‚.</p>\n  <script>console.log('Hello from JS')<\/script>\n</body>\n</html>",
      css: "/* Ø§ÙƒØªØ¨ CSS Ù‡Ù†Ø§ */\nbody{font-family:Segoe UI;background:#f5f7fa}\n.main{max-width:720px;margin:40px auto;padding:24px;border-radius:12px;background:#fff}",
      javascript: "// Ø§ÙƒØªØ¨ JavaScript Ù‡Ù†Ø§\nconsole.log('Hello, Monaco!');",
      typescript: "// TypeScript Ù…Ø«Ø§Ù„\nconst greet=(n:string)=>`Hello ${n}`;\nconsole.log(greet('Yasser'));",
      json: "{\n  \"name\":\"Elegant Code\",\n  \"version\":\"1.0.0\"\n}",
      markdown: "# Ù…Ø­Ø±Ø± Ø£Ù†ÙŠÙ‚\n\n- ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Monaco\n- ÙŠØ¯Ø¹Ù… Ù„ØºØ§Øª Ù…ØªØ¹Ø¯Ø¯Ø©",
      xml: "<note>\n  <to>Yasser</to>\n  <message>Hello XML</message>\n</note>",
      yaml: "name: Elegant Code\nversion: 1.0.0",
      java: "public class Main {\n  public static void main(String[] args){\n    System.out.println(\"Hello Java\");\n  }\n}",
      csharp: "using System;\nclass Program{static void Main(){Console.WriteLine(\"Hello C#\");}}",
      python: "print('Hello Python')",
      cpp: "#include <iostream>\nint main(){std::cout<<\"Hello C++\";return 0;}",
      php: "<?php echo 'Hello PHP'; ?>",
      rust: "fn main(){ println!(\"Hello Rust\"); }",
      go: "package main\nimport \"fmt\"\nfunc main(){ fmt.Println(\"Hello Go\") }",
      sql: "SELECT * FROM products LIMIT 10;",
      shell: "echo \"Hello Shell\""
    };

    const langMap = {
      html: 'html',
      css: 'css',
      javascript: 'javascript',
      typescript: 'typescript',
      json: 'json',
      markdown: 'markdown',
      xml: 'xml',
      yaml: 'yaml',
      java: 'java',
      csharp: 'csharp',
      python: 'python',
      cpp: 'cpp',
      php: 'php',
      rust: 'rust',
      go: 'go',
      sql: 'sql',
      shell: 'shell'
    };

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø­Ù…Ù„ Monaco
    require.config({ paths: { 'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.51.0/min/vs' } });
    require(['vs/editor/editor.main'], function () {
      const editor = monaco.editor.create(document.getElementById('editor'), {
        value: samples.html,
        language: 'html',
        theme: 'vs',
        automaticLayout: true,
        fontSize: 14,
        fontFamily: "Consolas, 'Segoe UI Mono', Menlo, monospace",
        minimap: { enabled: true },
        lineNumbers: 'on',
        smoothScrolling: true
      });

      const languageSel = document.getElementById('language');
      const themeSel = document.getElementById('theme');
      const preview = document.getElementById('preview');
      const runBtn = document.getElementById('run');
      const toggleThemeBtn = document.getElementById('toggleTheme');
      const downloadBtn = document.getElementById('download');
      const root = document.body;

      function setLanguage(lang){
        const mLang = langMap[lang] || 'plaintext';
        editor.setValue(samples[lang] || '');
        monaco.editor.setModelLanguage(editor.getModel(), mLang);
        // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù…ÙŠØ­ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
        document.querySelector('.hint').textContent =
          (lang==='html' || lang==='css' || lang==='javascript')
          ? 'ØªØ¹Ù…Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¹Ù†Ø¯ Ù„ØºØ§Øª Ø§Ù„ÙˆÙŠØ¨ (HTML/CSS/JS).'
          : 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§ÙŠÙ†Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù„ØºØ©ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù.';
        // Ù„Ù„Ù€ CSS/JS Ù†Ø­Ù‚Ù† Ø¶Ù…Ù† Ù‚Ø§Ù„Ø¨ HTML Ø¨Ø³ÙŠØ· Ø¹Ù†Ø¯ Ø§Ù„ØªØ´ØºÙŠÙ„
      }

      function setTheme(theme){
        monaco.editor.setTheme(theme);
      }

      languageSel.addEventListener('change', e => setLanguage(e.target.value));
      themeSel.addEventListener('change', e => setTheme(e.target.value));

      runBtn.addEventListener('click', () => {
        const lang = languageSel.value;
        const code = editor.getValue();
        if(lang==='html'){
          preview.srcdoc = code;
        }else if(lang==='css'){
          preview.srcdoc = `<!DOCTYPE html><html><head><style>${code}</style></head><body><div class="main"><h2>Preview CSS</h2><p>Ù‡Ø°Ø§ Ù…Ø¹Ø§ÙŠÙ†Ø© CSS Ø¶Ù…Ù† ØµÙØ­Ø© Ø¨Ø³ÙŠØ·Ø©.</p></div></body></html>`;
        }else if(lang==='javascript'){
          preview.srcdoc = `<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body><h2>Preview JS</h2><script>${code}<\/script></body></html>`;
        }else{
          // Ù„ØºØ§Øª ØºÙŠØ± Ø§Ù„ÙˆÙŠØ¨: Ù†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø¨Ø³ÙŠØ·Ø©
          preview.srcdoc = `<!DOCTYPE html><html><body style="font-family:Segoe UI;padding:18px"><h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§ÙŠÙ†Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù„ØºØ©</h3><p>Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯.</p></body></html>`;
        }
      });

      toggleThemeBtn.addEventListener('click', () => {
        const isDark = document.body.getAttribute('data-theme') === 'dark';
        document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
      });

      downloadBtn.addEventListener('click', () => {
        const lang = languageSel.value;
        const code = editor.getValue();
        const extMap = {
          html:'html', css:'css', javascript:'js', typescript:'ts', json:'json', markdown:'md',
          xml:'xml', yaml:'yaml', java:'java', csharp:'cs', python:'py', cpp:'cpp', php:'php',
          rust:'rs', go:'go', sql:'sql', shell:'sh'
        };
        const ext = extMap[lang] || 'txt';
        const blob = new Blob([code], {type: 'text/plain;charset=utf-8'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `code.${ext}`;
        a.click();
        URL.revokeObjectURL(a.href);
      });
    });
  </script>
</body>
</html>
